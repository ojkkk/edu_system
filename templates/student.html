{% extends "layout.html" %}
{% block title %}学生面板{% endblock %}
{% block content %}
<div class="card">
    <h2>个人信息</h2>
    <p>姓名：{{ student.fullname }}</p>
    <p>邮箱：{{ student.email }}</p>
</div>

<div class="card">
    <h3>已选课程</h3>
    <table>
        <tr>
            <th>课程名称</th>
            <th>时间</th>
            <th>地点</th>
            <th>学分</th>
            <th>平时成绩</th>
            <th>期末成绩</th>
            <th>总评成绩</th>
        </tr>
        {% for course in enrolled %}
        <tr>
            <td>{{ course.name }}</td>
            <td>{{ course.time }}</td>
            <td>{{ course.location }}</td>
            <td>{{ course.credit }}</td>
            <td>{{ course.usual_grade or '-' }}</td>
            <td>{{ course.final_grade or '-'}}</td>
            <td>{{ course.total_grade | round(2) if course.total_grade else '-' }}</td>
        </tr>
        {% endfor %}
    </table>
</div>

<div class="card">
  <div class="course-container">
    <h3>可选课程列表</h3>
    <div class="course-table-wrapper">
        <table class="course-table">
            <thead>
                <tr>
                    <th>课程名称</th>
                    <th>学分</th>
                    <th>授课教师</th>
                    <th>上课时间</th>
                    <th>上课地点</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                {% for course in available %}
                <tr>
                    <td>{{ course.course_name }}</td>
                    <td>{{ course.credit }}</td>
                    <td>{{ course.teacher_name }}</td>
                    <td>{{ course.time }}</td>
                    <td>{{ course.location }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('enroll') }}">
                            <input type="hidden" name="course_id" value="{{ course.course_id }}">
                            <button class="btn-enroll" type="submit">
                                <svg viewBox="0 0 24 24" width="16" height="16">
                                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                </svg>
                                选课
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>




</div>
{% endblock %}
<style>
.course-container {
    margin: 2rem 0;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

h3 {
    padding: 1.5rem;
    margin: 0;
    color: #6a1b9a;
    border-bottom: 2px solid #f0f0f0;
}

.course-table-wrapper {
    overflow-x: auto;
    padding: 0 1rem;
}

.course-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 800px;
}

.course-table th {
    background: #f8f5fc;
    color: #6a1b9a;
    padding: 1rem;
    text-align: left;
    position: sticky;
    left: 0;
    white-space: nowrap;
}

.course-table td {
    padding: 1rem;
    border-bottom: 1px solid #f0f0f0;
    vertical-align: middle;
}

.course-table tr:hover {
    background: #fcfaff;
}

.btn-enroll {
    background: #9c27b0;
    color: white;
    border: none;
    padding: 0.6rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    transition: background 0.3s;
}

.btn-enroll:hover {
    background: #6a1b9a;
}

.btn-enroll svg {
    fill: currentColor;
}

@media (max-width: 768px) {
    .course-container {
        margin: 1rem;
    }

    .course-table td {
        padding: 0.8rem;
    }

    .btn-enroll {
        padding: 0.5rem 0.8rem;
        font-size: 0.9rem;
    }
}
</style>